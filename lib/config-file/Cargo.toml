[package]
name = "config-file"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
publish.workspace = true

[features]
default = []

json = []
toml = []
yaml = []

load-str = ["serde"]
load-json = ["json", "serde_json", "load-str"]
load-toml = ["toml", "serde_toml", "load-str"]
load-yaml = ["yaml", "serde_yaml", "load-str"]
load-sync = ["load-str"]
load-async = ["load-str", "tokio"]

layered = ["serde", "config"]
layered-json = ["layered", "json", "config/json"]
layered-toml = ["layered", "toml", "config/toml"]
layered-yaml = ["layered", "yaml", "config/yaml"]

[dependencies]
config = { version = "0.13.1", default-features = false, optional = true }
directories = "5.0"
pathdiff = "0.2.1"
serde = { version = "1.0.160", optional = true }
serde_json = { version = "1.0.96", optional = true }
serde_toml = { package = "toml", version = "0.7", optional = true }
serde_yaml = { version = "0.9.10", optional = true }
thiserror = { workspace = true }
tokio = { version = "1.27.0", features = ["fs", "io-util"], optional = true }
tracing = "0.1"

[dev-dependencies]
serde = { workspace = true }
